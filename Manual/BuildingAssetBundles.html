<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Building AssetBundles in 4.x</title>
<meta name="description" content="Develop once, publish everywhere! Unity is the ultimate tool for video game development, architectural visualizations, and interactive media installations - publish to the web, Windows, OS X, Wii, Xbox 360, and iPhone with many more platforms to come.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2854981-1']);
  _gaq.push(['_setDomainName', 'unity3d.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js"></script><script type="text/javascript" src="../StaticFilesManual/js/highlight.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src="docdata/global_toc.js"></script><script>hljs.initHighlightingOnLoad();</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="http://docs.unity3d.com">Overview</a></li>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="http://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content"><div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/BuildingAssetBundles.html">English</a></li>
<li><a href="/es/current/Manual/BuildingAssetBundles.html">Español</a></li>
<li><a href="/ru/current/Manual/BuildingAssetBundles.html">Русский</a></li>
</ul></div>
</div></div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManualRestructured.html">Unity Manual</a></li>
<li><a href="Architecture.html">Architecture</a></li>
<li>Architecture HOWTOs</li>
<li><a href="AssetBundlesIntro.html">AssetBundles</a></li>
<li><a href="AssetBundles4x.html"> Legacy Asset Bundles</a></li>
<li>Building AssetBundles in 4.x</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="AssetBundles4x.html"></a></span><div class="tip"> Legacy Asset Bundles</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide3540.html"></a></span><div class="tip">Upgrade Guide from Unity 3.5 to 4.0</div>
</div>
</div></div>
<h1>Building AssetBundles in 4.x</h1>
  		        <div class="suggest">
                <a class="blue-btn sbtn">Suggest a change</a>
                <div class="suggest-wrap rel hide">
                  <div class="loading hide">
<div></div>
<div></div>
<div></div>
</div>
                  <div class="suggest-success hide">
                    <h2>Success!</h2>
                    <p>Thank you for helping us improve the quality of Unity Documentation. Although we cannot accept all submissions, we do read each suggested change from our users and will make updates where applicable.</p>
                    <a class="gray-btn sbtn close">Close</a>
                  </div>
                  <div class="suggest-failed hide">
                    <h2>Sumbission failed</h2>
                    <p>For some reason your suggested change could not be submitted. Please <a>try again</a> in a few minutes. And thank you for taking the time to help us improve the quality of Unity Documentation.</p>
                    <a class="gray-btn sbtn close">Close</a>
                  </div>
                  <div class="suggest-form clear">
                    <label for="suggest_name">Your name</label>
                    <input id="suggest_name" type="text">
                    <label for="suggest_email">Your email</label>
                    <input id="suggest_email" type="email">
                    <label for="suggest_body" class="clear">Suggestion <span class="r">*</span></label>
                    <textarea id="suggest_body" class="req"></textarea>
                    <button id="suggest_submit" class="blue-btn mr10">Submit suggestion</button>
                    <p class="mb0"><a class="cancel left lh42 cn">Cancel</a></p>
                  </div>
                </div>
              </div>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p><em>This page describes the legacy AssetBundle creation.</em></p>

<p>There are three class methods you can use to build AssetBundles: </p>

<ul>
<li><p>
<a href="../ScriptReference/BuildPipeline.BuildAssetBundle.html">BuildPipeline.BuildAssetBundle</a> allows you to build AssetBundles of any type of asset.</p></li>
<li><p>
<a href="../ScriptReference/BuildPipeline.BuildStreamedSceneAssetBundle.html">BuildPipeline.BuildStreamedSceneAssetBundle</a> is used when you want to include only scenes to be streamed and loaded as the data becomes available.</p></li>
<li><p>
<a href="../ScriptReference/BuildPipeline.BuildAssetBundleExplicitAssetNames.html">BuildPipeline.BuildAssetBundleExplicitAssetNames</a> is the same as BuildPipeline.BuildAssetBundle but has an extra parameter to specify a custom string identifier (name) for each object.</p></li>
</ul>

<h2>An example of how to build an AssetBundle</h2>

<p>Building asset bundles is done through editor scripting. There is basic example of this in the scripting documentation for <a href="../ScriptReference/BuildPipeline.BuildAssetBundle.html">BuildPipeline.BuildAssetBundle</a>. </p>

<p>For the sake of this example, copy and paste the script from the link above into a new C# script called ExportAssetBundles. This script should be placed in a folder named Editor, so that it works inside the Unity Editor.</p>

<figure>
<img src="../uploads/Main/ExportAssetBundlesScript.png" alt="">
<figcaption></figcaption></figure>

<p>Now in the <span class="doc-menu">Assets</span> menu, you should see two new menu options.</p>

<figure>
<img src="../uploads/Main/AssetBundleMenuOptions.png" alt="">
<figcaption></figcaption></figure>

<ol>
<li><p>
<span class="doc-menu">Build AssetBundle From Selection - Track dependencies</span>. This will build the current object into an asset bundle and include all of its dependencies. For example if you have a prefab that consists of several hierarchical layers then it will recursively add all the child objects and components to the asset bundle.</p></li>
<li><p>
<span class="doc-menu">Build AssetBundle From Selection - No dependency tracking</span>. This is the opposite of the previous method and will only include the single asset you have selected.</p></li>
</ol>

<p>For this example, you should create a new prefab. First create a new Cube by going to <span class="doc-menu">GameObject &gt; 3D Object &gt; Cube</span>, which will create a new cube in the Hierarchy View. Then drag the Cube from the Hierarchy View into the Project View, which will create a prefab of that object.</p>

<p>You should then right click the Cube prefab in the project window and select <span class="doc-menu">Build AssetBundle From Selection - Track dependencies</span>.
At this point you will be presented with a window to save the “bundled” asset. If you created a new folder called “AssetBundles” and saved the cube as <span class="doc-prop">Cube.unity3d</span>, your project window will now look something like this.</p>

<figure>
<img src="../uploads/Main/AssetBundlesCube.png" alt="">
<figcaption></figcaption></figure>

<p>At this point you can move the AssetBundle <span class="doc-prop">Cube.unity3d</span> elsewhere on your local storage, or upload it to a server of your choice.</p>

<h2>An example of how to change the properties of the assets when building an Asset Bundle</h2>

<p>You can use <a href="../ScriptReference/AssetDatabase.ImportAsset.html">AssetDatabase.ImportAsset</a> to force reimporting the asset right before calling <a href="../ScriptReference/BuildPipeline.BuildAssetBundle.html">BuildPipeline.BuildAssetBundle</a>, and then use <a href="../ScriptReference/AssetPostprocessor.OnPreprocessTexture.html">AssetPostprocessor.OnPreprocessTexture</a> to set the required properties. The following example will show you how to set different texture compressions when building the Asset Bundle.</p>

<pre><code>// c# example
// Builds an asset bundle from the selected objects in the project view,
// and changes the texture format using an AssetPostprocessor.

using UnityEngine;
using UnityEditor;

public class ExportAssetBundles {
    
    // Store current texture format for the TextureProcessor.
    public static TextureImporterFormat textureFormat;
    
    [MenuItem(&quot;Assets/Build AssetBundle From Selection - PVRTC_RGB2&quot;)]
    static void ExportResourceRGB2 () {
        textureFormat = TextureImporterFormat.PVRTC_RGB2;
        ExportResource();       
    }   
    
    [MenuItem(&quot;Assets/Build AssetBundle From Selection - PVRTC_RGB4&quot;)]
    static void ExportResourceRGB4 () {
        textureFormat = TextureImporterFormat.PVRTC_RGB4;
        ExportResource();
    }
    
    static void ExportResource () {
        // Bring up save panel.
        string path = EditorUtility.SaveFilePanel (&quot;Save Resource&quot;, &quot;&quot;, &quot;New Resource&quot;, &quot;unity3d&quot;);
        
        if (path.Length != 0) {
            // Build the resource file from the active selection.
            Object[] selection = Selection.GetFiltered(typeof(Object), SelectionMode.DeepAssets);
            
            foreach (object asset in selection) {
                string assetPath = AssetDatabase.GetAssetPath((UnityEngine.Object) asset);
                if (asset is Texture2D) {
                    // Force reimport thru TextureProcessor.
                    AssetDatabase.ImportAsset(assetPath);
                }
            }
            
            BuildPipeline.BuildAssetBundle(Selection.activeObject, selection, path, BuildAssetBundleOptions.CollectDependencies | BuildAssetBundleOptions.CompleteAssets);
            Selection.objects = selection;
        }
    }
}
</code></pre>

<pre><code>// c# example
// Changes the texture format when building the Asset Bundle.

using UnityEngine;
using UnityEditor;

public class TextureProcessor : AssetPostprocessor
{ 
    void OnPreprocessTexture() {
        TextureImporter importer = assetImporter as TextureImporter;
        importer.textureFormat = ExportAssetBundles.textureFormat;
    }
}


</code></pre>

<p>You can also control how the asset is imported using the <a href="../ScriptReference/ImportAssetOptions.html">AssetDatabase.ImportAssetOptions</a>.</p>

<p>In a test environment, you sometimes need to test a change that require AssetBundles to be rebuilt. In these cases, it is advisable to use the option <a href="../ScriptReference/BuildAssetBundleOptions.UncompressedAssetBundle.html">BuildAssetBundleOptions.UncompressedAssetBundle</a> when you build the AssetBundles. This makes it faster to build and load the AssetBundles but they will also be bigger and therefore take longer to download.</p>

<h2>Building AssetBundles in a production enviroment</h2>

<p>When first using AssetBundles it may seem enough to manually build them as seen in the previous example. But as a project grows in size and the number of assets increases doing this process by hand is not efficient. A better approach is to write a function that builds all of the AssetBundles for a project. You can, for example, use a text file that maps Asset files to AssetBundle files.</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="AssetBundles4x.html"></a></span><div class="tip"> Legacy Asset Bundles</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide3540.html"></a></span><div class="tip">Upgrade Guide from Unity 3.5 to 4.0</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2014 Unity Technologies</div>
<div class="menu">
<a href="http://unity3d.com/learn">Learn</a><a href="http://unity3d.com/community">Community</a><a href="http://unity3d.com/asset-store">Asset Store</a><a href="https://store.unity3d.com">Buy</a><a href="http://unity3d.com/unity/download">Download</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
