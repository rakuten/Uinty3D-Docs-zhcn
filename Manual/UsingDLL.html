<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Managed Plugins</title>
<meta name="description" content="Develop once, publish everywhere! Unity is the ultimate tool for video game development, architectural visualizations, and interactive media installations - publish to the web, Windows, OS X, Wii, Xbox 360, and iPhone with many more platforms to come.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2854981-1']);
  _gaq.push(['_setDomainName', 'unity3d.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js"></script><script type="text/javascript" src="../StaticFilesManual/js/highlight.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src="docdata/global_toc.js"></script><script>hljs.initHighlightingOnLoad();</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="http://docs.unity3d.com">Overview</a></li>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="http://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content"><div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UsingDLL.html">English</a></li>
<li><a href="/es/current/Manual/UsingDLL.html">Español</a></li>
<li><a href="/ru/current/Manual/UsingDLL.html">Русский</a></li>
</ul></div>
</div></div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManualRestructured.html">Unity Manual</a></li>
<li><a href="Architecture.html">Architecture</a></li>
<li>Architecture Overview</li>
<li><a href="Plugins.html">Plugins</a></li>
<li>Managed Plugins</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="PluginInspector.html"></a></span><div class="tip">Plugin Inspector</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="NativePlugins.html"></a></span><div class="tip">Native Plugins</div>
</div>
</div></div>
<h1>Managed Plugins</h1>
  		        <div class="suggest">
                <a class="blue-btn sbtn">Suggest a change</a>
                <div class="suggest-wrap rel hide">
                  <div class="loading hide">
<div></div>
<div></div>
<div></div>
</div>
                  <div class="suggest-success hide">
                    <h2>Success!</h2>
                    <p>Thank you for helping us improve the quality of Unity Documentation. Although we cannot accept all submissions, we do read each suggested change from our users and will make updates where applicable.</p>
                    <a class="gray-btn sbtn close">Close</a>
                  </div>
                  <div class="suggest-failed hide">
                    <h2>Sumbission failed</h2>
                    <p>For some reason your suggested change could not be submitted. Please <a>try again</a> in a few minutes. And thank you for taking the time to help us improve the quality of Unity Documentation.</p>
                    <a class="gray-btn sbtn close">Close</a>
                  </div>
                  <div class="suggest-form clear">
                    <label for="suggest_name">Your name</label>
                    <input id="suggest_name" type="text">
                    <label for="suggest_email">Your email</label>
                    <input id="suggest_email" type="email">
                    <label for="suggest_body" class="clear">Suggestion <span class="r">*</span></label>
                    <textarea id="suggest_body" class="req"></textarea>
                    <button id="suggest_submit" class="blue-btn mr10">Submit suggestion</button>
                    <p class="mb0"><a class="cancel left lh42 cn">Cancel</a></p>
                  </div>
                </div>
              </div>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Usually, scripts are kept in a project as source files and compiled by Unity whenever the source changes. However, it is also possible to compile a script to a <strong>dynamically linked library</strong> (DLL) using an external compiler. The resulting DLL can then be added to the project and the classes it contains can be attached to objects just like normal scripts.</p>

<p>It is generally much easier to work with scripts than DLLs in Unity. However, you may have access to third party Mono code which is supplied in the form of a DLL. When developing your own code, you may be able to use compilers not supported by Unity (F#, for example) by compiling the code to a DLL and adding it to your Unity project. Also, you may want to supply Unity code without the source (for an Asset Store product, say) and a DLL is an easy way to do this.</p>

<h2>Creating a DLL</h2>

<p>To create a DLL, you will first need a suitable compiler. Not all compilers that produce .NET code are guaranteed to work with Unity, so it may be wise to test the compiler with some available code before doing significant work with it. If the DLL contains no code that depends on the Unity API then you can simply compile it to a DLL using the appropriate compiler options. If you do want to use the Unity API then you will need to make Unity’s own DLLs available to the compiler. On a Mac, these are contained in the application bundle (you can see the internal structure of the bundle by using the Show Package Contents command from the contextual menu; right click or ctrl-click the Unity application):-</p>

<p>The path to the Unity DLLs will typically be</p>

<pre><code>/Applications/Unity/Unity.app/Contents/Frameworks/Managed/
</code></pre>

<p>…and the two DLLs are called UnityEngine.dll and UnityEditor.dll.</p>

<p>On Windows, the DLLs can be found in the folders that accompany the Unity application. The path will typically be</p>

<pre><code>C:\Program Files\Unity\Editor\Data\Managed
</code></pre>

<p>…while the names of the DLLs are the same as for Mac OS.</p>

<p>The exact options for compiling the DLL will vary depending on the compiler used. As an example, the command line for the Mono C# compiler, <strong>mcs</strong>, might look like this on Mac OS:-</p>

<pre><code>mcs -r:/Applications/Unity/Unity.app/Contents/Frameworks/Managed/UnityEngine.dll -target:library ClassesForDLL.cs 
</code></pre>

<p>Here, the <em>-r</em> option specifies a path to a library to be included in the build, in this case the UnityEngine library. The <em>-target</em> option specifies which type of build is required; the word “library” is used to select a DLL build. Finally, the name of the source file to compile is <em>ClassesForDLL.cs</em> (it is assumed that this file is in the current working folder, but you could specify the file using a full path if necessary). Assuming all goes well, the resulting DLL file will appear shortly in the same folder as the source file.</p>

<h2>Using the DLL</h2>

<p>Once compiled, the DLL file can simply be dragged into the Unity project like any other asset. The DLL asset has a foldout triangle which can be used to reveal the separate classes inside the library. Classes that derive from MonoBehaviour can be dragged onto Game Objects like ordinary scripts. Non-MonoBehaviour classes can be used directly from other scripts in the usual way.</p>

<figure>
<img src="../uploads/Main/DLLScreenshot.png" alt="A folded-out DLL with the classes visible">
<figcaption>A folded-out DLL with the classes visible</figcaption></figure>

<h2>Step by Step Guide for MonoDevelop and Visual Studio</h2>

<p>This section explains how to build and integrate a simple DLL example with MonoDevelop and Visual Studio and also how to prepare a debugging session for the DLL.</p>

<h3>Setting Up the Project</h3>

<p>First, open MonoDevelop or Visual Studio and create a new project. In MonoDevelop, you do this by selecting <span class="doc-menu">File &gt; New &gt; Solution</span> and then choosing <span class="doc-menu">C# &gt; Library</span>. In Visual Studio, you should select <span class="doc-menu">File &gt; New &gt; Project</span> and then choose <span class="doc-menu">Visual C# &gt; Class Library</span>.</p>

<p>You then need to fill out the information for the new library:</p>

<ul>
<li>
<strong>Name</strong> is the namespace (for this example use “DLLTest” as the name).</li>
<li>
<strong>Location</strong> is the parent folder of the project.</li>
<li>
<strong>Solution name</strong> is the folder of the project.</li>
</ul>

<p>Next, you should add references to the Unity DLLs. In MonoDevelop, you should open the contextual menu For <em>References</em> in the Solution Browser and choose <span class="doc-menu">Edit References</span>. Then, choose the option <span class="doc-menu">.Net Assembly tab &gt; File System &gt; select file</span>. In Visual Studio, open the contextual menu For <em>References</em> in the Solution Explorer and choose <span class="doc-menu">Add Reference</span>. Then, choose the option <span class="doc-menu">Browse &gt; Browse &gt; select file</span>.</p>

<p>At this stage, you will have the option to select the required DLL file. On Mac OSX, the file can be found at</p>

<pre><code>    Applications/Unity.app/Contents/Frameworks/Managed/UnityEngine.dll
</code></pre>

<p>…while on Windows, the path is</p>

<pre><code>    Program Files\Unity\Editor\Data\Managed\UnityEngine.dll
</code></pre>

<h3>Code</h3>

<p>For this example, rename the class to “MyUtilities” in the Solution browser and replace its code with the following:</p>

<pre><code>     using System;  
     using UnityEngine;

     namespace DLLTest {

        public class MyUtilities {
    
            public int c;

            public void AddValues(int a, int b) {
                c = a + b;  
            }
    
            public static int GenerateRandom(int min, int max) {
                System.Random rand = new System.Random();
                return rand.Next(min, max);
            }
        }
     }
</code></pre>

<p>With the code in place, build the project to generate the DLL file along with its debug symbols.</p>

<h3>Using the DLL in Unity</h3>

<p>For this example, create a new project in Unity and copy the built file <code>&lt;project folder&gt;/bin/Debug/DLLTest.dll</code> into the Assets folder. Then, create a C# script called “Test” in Assets, and replace its contents with the following code:</p>

<pre><code>     using UnityEngine;
     using System.Collections;
     using DLLTest;
    
     void Start () {
        MyUtilities utils = new MyUtilities();
        utils.AddValues(2, 3);
        print(&quot;2 + 3 = &quot; + utils.c);
     }
    
     void Update () {
        print(MyUtilities.GenerateRandom(0, 100));
     }
</code></pre>

<p>When you attach this script to an object in the scene and press Play, you will see the output of the code from the DLL in the Console window.</p>

<h3>Setting Up a Debugging Session for the DLL</h3>

<p>Firstly, you should repare the debug symbols for the DLL. In MonoDevelop, copy the built file <code>&lt;project folder&gt;/bin/Debug/DLLTest.dll.mdb</code> into the Assets/Plugins folder. In Visual Studio, execute</p>

<pre><code>Program Files\Unity\Editor\Data\Mono\lib\mono\2.0\pdb2mdb.exe
</code></pre>

<p>in the command prompt, passing <code>&lt;project folder&gt;\bin\Debug\DLLTest.pdb</code> as a parameter. Then, copy the converted file <code>&lt;project folder&gt;\bin\Debug\DLLTest.dll.mdb</code> into Assets/Plugins.</p>

<p>Next, open the “Test” script in MonoDevelop. Make sure the Unity debugger is enabled from the Tools menu (Windows) or MonoDevelop-Unity menu (MacOS). The option you need from this menu is <span class="doc-menu">Add-in Manager &gt; Installed tab &gt; Unity &gt; select Mono Soft Debugger Support for Unity &gt; Enable</span>.</p>

<p>With this setup completed, you can debug code that uses the DLL in Unity in the usual way. See the <a href="ScriptingTools.html">Scripting Tools</a> section for further information about debugging.</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="PluginInspector.html"></a></span><div class="tip">Plugin Inspector</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="NativePlugins.html"></a></span><div class="tip">Native Plugins</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2014 Unity Technologies</div>
<div class="menu">
<a href="http://unity3d.com/learn">Learn</a><a href="http://unity3d.com/community">Community</a><a href="http://unity3d.com/asset-store">Asset Store</a><a href="https://store.unity3d.com">Buy</a><a href="http://unity3d.com/unity/download">Download</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
